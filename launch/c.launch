<launch>

  <arg name="UAV_NAME" default="$(env UAV_NAME)"/>
  <arg name="RUN_TYPE" default="$(env RUN_TYPE)"/>
  <arg name="UAV_TYPE" default="$(env UAV_TYPE)"/>
  <arg name="config_file" default="$(find mrs_status)/config/status.yaml"/>

  <arg if="$(eval arg('RUN_TYPE') == 'simulation' and arg('UAV_TYPE') == 't650')" name="UAV_MASS" default="5.0" />
  <arg if="$(eval arg('RUN_TYPE') == 'simulation' and arg('UAV_TYPE') == 'f550')" name="UAV_MASS" default="3.0" />
  <arg if="$(eval arg('RUN_TYPE') == 'simulation' and arg('UAV_TYPE') == 'f450')" name="UAV_MASS" default="2.3" />
  <arg if="$(eval arg('RUN_TYPE') == 'uav')" name="UAV_MASS" default="$(env UAV_MASS)" />

  <group ns="$(arg UAV_NAME)">

    <node name="mrs_status_c" pkg="mrs_status" type="mrs_status" output="screen" respawn="true">

      <rosparam file="$(arg config_file)" />

      <param name="uav_mass" value="$(arg UAV_MASS)" />

        <!-- Subscribers -->
      <remap from="~uav_state_in" to="odometry/uav_state" />
      <remap from="~mavros_state_in" to="mavros/state" />
      <remap from="~mavros_attitude_in" to="mavros/setpoint_raw/attitude" />
      <remap from="~battery_in" to="mavros/battery" />
      <remap from="~control_manager_in" to="control_manager/diagnostics" />
      <remap from="~gain_manager_in" to="gain_manager/diagnostics" />
      <remap from="~constraint_manager_in" to="constraint_manager/diagnostics" />

    </node>

  </group>

</launch>
